<!doctype html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Activation ‚Äî Fidelavis</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700;800;900&display=swap" rel="stylesheet">

<style>
:root{
  --gold:#B8924F;
  --bg:#f6efe5;
  --ink:#1d1d1d;
  --muted:#6b6b6b;
  --line:rgba(0,0,0,.08);
  --shadow:0 16px 34px rgba(0,0,0,.10);
  --radius:18px;
  --danger:#b6152b;
  --ok:#1f8a4c;
}

*{box-sizing:border-box;}

body{
  margin:0;
  font-family:'Montserrat',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:
    radial-gradient(1200px 600px at 50% -120px, rgba(184,146,79,0.18), transparent 60%),
    linear-gradient(180deg,#f7f0e8 0%, #f4eadf 100%);
  color:var(--ink);
  padding:12px 12px 26px;
  text-align:center;
}

.container{max-width:460px;margin:0 auto;}

.badge{
  display:inline-flex;align-items:center;gap:8px;
  padding:6px 12px;border-radius:999px;
  background:rgba(255,255,255,.86);
  border:1px solid var(--line);
  font-weight:900;font-size:12.5px;
  box-shadow:0 10px 18px rgba(0,0,0,.05);
  margin:6px 0 8px;
}
.dot{
  width:8px;height:8px;border-radius:50%;
  background:var(--ok);
  box-shadow:0 0 0 6px rgba(31,138,76,0.12);
}

h1{
  margin:4px 0 4px;
  font-size:24px;
  font-weight:950;
  letter-spacing:-0.4px;
  line-height:1.15;
}
.sub{
  margin:0 0 10px;
  color:var(--muted);
  font-size:13.5px;
  font-weight:650;
  line-height:1.35;
}

.urgency{
  display:inline-flex;align-items:center;justify-content:center;gap:8px;
  margin:0 0 12px;
  padding:8px 12px;border-radius:14px;
  background:rgba(182,21,43,0.08);
  border:1px solid rgba(182,21,43,0.16);
  color:#7a1120;
  font-weight:950;
  font-size:12.8px;
}

.card{
  background:#fff;
  border:1px solid var(--line);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:14px 14px 14px;
  text-align:left;
}

.pills{
  display:flex;gap:8px;flex-wrap:wrap;
  margin:0 0 10px;
}
.pill{
  display:inline-flex;align-items:center;gap:8px;
  padding:7px 11px;border-radius:999px;
  font-size:12.2px;font-weight:900;
  background:rgba(184,146,79,0.12);
  border:1px solid rgba(184,146,79,0.22);
}

.title2{
  margin:0 0 10px;
  font-size:16px;
  font-weight:950;
  letter-spacing:-0.2px;
}

iframe{
  width:100%;
  height:470px;           /* plus compact */
  border:none;
  border-radius:14px;
  box-shadow:0 4px 14px rgba(0,0,0,0.08);
  background:#fff;
}

.legal{
  margin-top:12px;
  color:#5a5a5a;
  font-size:12px;
  line-height:1.45;
  font-weight:650;
  text-align:left;
}

.links{
  margin-top:10px;
  display:flex;
  gap:10px;
  justify-content:flex-start;
  flex-wrap:wrap;
}
.links a{
  color:#2b2b2b;
  font-weight:900;
  text-decoration:underline;
  font-size:12.5px;
}
</style>
</head>

<body>
<div class="container">

  <div class="badge"><span class="dot"></span>Derni√®re √©tape</div>

  <h1>Devenez membre de <span id="restoName">Restaurant</span></h1>
  <div class="sub">Recevez votre r√©duction par email en quelques secondes.</div>

  <div class="urgency">‚è≥ Activation valable <b>aujourd‚Äôhui</b></div>

  <div class="card">
    <div class="pills">
      <div class="pill">üéÅ -10% pr√™t</div>
      <div class="pill">‚ö° 10 secondes</div>
      <div class="pill">üîí Anti-spam</div>
    </div>

    <div class="title2">üéÅ Recevez votre -10% maintenant</div>

    <!-- FORM GHL -->
    <iframe
      id="formFrame"
      src="https://api.leadconnectorhq.com/widget/form/meg8u98n1nNyA4he57qX"
      title="Formulaire d'inscription">
    </iframe>

    </div>
  </div>

</div>

<script>
(function(){
  const qs = (k)=> new URLSearchParams(location.search).get(k);

  // 1) Nom resto : param ?resto= > localStorage > dossier /restoX/ > fallback
  function detectResto(){
    const p = qs("resto");
    if (p) {
      localStorage.setItem("fidelavis_resto_name", p);
      return p;
    }
    const ls = localStorage.getItem("fidelavis_resto_name");
    if (ls) return ls;

    // /resto2/inscription.html -> resto2
    const parts = location.pathname.split("/").filter(Boolean);
    const folder = parts[0]; // ex: "resto2"
    if (folder && folder.toLowerCase().startsWith("resto")) return folder;

    return "Restaurant";
  }

  const resto = detectResto();
  document.getElementById("restoName").textContent = resto;

  // 2) "from" pour que policy/cgu reviennent au bon dossier resto
  // On renvoie vers la page coupon du m√™me dossier (ou index si tu veux)
  const folder = (location.pathname.split("/").filter(Boolean)[0]) || "";
  const backTo = folder ? `/${folder}/coupon.html` : `/`;
  const from = encodeURIComponent(backTo);

  document.getElementById("pp").href  = `/privacy.html?from=${from}`;
  document.getElementById("cgu").href = `/cgu.html?from=${from}`;

  // 3) Option : si tu veux encore + compact, tu peux r√©duire l'iframe sur petits √©crans
  if (window.innerHeight < 740) {
    document.getElementById("formFrame").style.height = "440px";
  }
})();
</script>
</body>
</html>
